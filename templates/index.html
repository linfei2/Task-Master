{% extends 'base.html' %}

{% block head %}
<h1>Task Master</h1>
{% endblock %}

{% block body %}
<div class="content">
    {% if not tasks.items %}
        <h2>No tasks yet. Create one below.</h2>
    {% else %}
        <table>
            <tr>
                <th>Task</th>
                <th>Date Created</th>
                <th>Due Date</th>
                <th>Action</th>
            </tr>
            {% for task in tasks.items %}
                <tr>
                    <td>{{ task.content }}</td>
                    <td>{{ task.date_created.date() }}</td>
                    {% if task.due_date %}
                        <td>
                            {{task.due_date.date()}}
                        </td>
                    {% else %}
                        <td>
                            <a class="action" href="/due/{{task.id}}">Add</a>
                        </td>
                    {% endif %}
                    <td>
                        <a class="action" href="/delete/{{task.id}}">Complete</a><br>
                        <a class="action" href="/update/{{task.id}}">Update</a>
                    </td>
                </tr>
        {% endfor %}
    {% endif %}
    </table>
    <form action="/" method="POST" class="form">
        <input type="text" name=content id="content">
        <input type="submit" value="Add task">
    </form>
    {% for page_num in tasks.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
        {% if page_num %}
            {% if tasks.page == page_num %}
            <a class="current_btn" href="{{ url_for('index', page=page_num) }}">{{page_num}}</a>
            {% else %}
            <a class="btn" href="{{ url_for('index', page=page_num) }}">{{page_num}}</a>
            {% endif %}
        {% else %}
            ...
        {% endif %}
    {% endfor %}
</div>
{% endblock %}